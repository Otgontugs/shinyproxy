<!--

    ShinyProxy

    Copyright (C) 2016-2017 Open Analytics

    ===========================================================================

    This program is free software: you can redistribute it and/or modify
    it under the terms of the Apache License as published by
    The Apache Software Foundation, either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    Apache License for more details.

    You should have received a copy of the Apache License
    along with this program.  If not, see <http://www.apache.org/licenses/>

-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head lang="en">
	<title th:text="${title}"></title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" media="screen" th:href="@{/css/nav.css}"/> 
	<link rel="stylesheet" media="screen" th:href="@{/css/list.css}"/>
	<script th:src="@{/webjars/jquery/2.2.2/jquery.min.js}"></script>
	<script th:src="@{/webjars/bootstrap/3.3.6/js/bootstrap.min.js}"></script>
        <script>

$(document).ready(function(){
  var zindex = 10;

  $(".btn-link").click(function(e) {
   e.stopPropagation();
  });

  $("div.card").click(function(e){
    e.preventDefault();

    var isShowing = false;

    if ($(this).hasClass("show")) {
      isShowing = true
    }

    if ($("div.cards").hasClass("showing")) {
      // a card is already in view
      $("div.card.show")
        .removeClass("show");

      if (isShowing) {
        // this card was showing - reset the grid
        $("div.cards")
          .removeClass("showing");
      } else {
        // this card isn't showing - get in with it
        $(this)
          .css({zIndex: zindex})
          .addClass("show");

      }

      zindex++;

    } else {
      // no cards in view
      $("div.cards")
        .addClass("showing");
      $(this)
        .css({zIndex:zindex})
        .addClass("show");

      zindex++;
    }
    
  });
});
        </script>
</head>


<body>

 <div th:replace="../fragments/navbar :: navbar"></div>

	
	<!-- content  -->


<div class="cards">

  <div class="card" th:each="app: ${apps}">
    <img th:if="${appLogos.get(app) != null}" th:src="${appLogos.get(app)}"></img>
    <div class="card-title">
      <a th:href="@{/app/}+${app.name}" class="toggle-info btn">
        <span class="left"></span>
        <span class="right"></span>
      </a>
      <h2 th:text="${app.displayName == null} ? ${app.name} : ${app.displayName}">
      </h2>
    </div>
    <div class="card-flap flap1">
      <div class="card-description" th:if="${app.descr != null}" th:text="${app.descr}">
      </div>
      <div class="card-flap flap2">
        <div class="card-actions">
          <a th:href="@{/app/}+${app.name}" class="btn btn-link">Open</a>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
